# WoodWOP Post Processor for FreeCAD

Post-processor для FreeCAD Path Workbench, который конвертирует операции обработки в формат WoodWOP MPR 4.0 для станков HOMAG CNC.

## Возможности

- ✅ Генерация файлов в формате WoodWOP MPR 4.0
- ✅ Параллельная генерация G-code для сравнения
- ✅ Автоматическое именование файлов на основе имени детали и Job
- ✅ Автоматическая генерация отчета о проекте
- ✅ Поддержка контуров, сверления и карманов
- ✅ Автоматическое определение размеров заготовки

## Установка

### Метод 1: Установка в системную директорию (Рекомендуется)

#### macOS:
```bash
sudo cp "woodwop_post.py" "/Applications/FreeCAD.app/Contents/Resources/Mod/CAM/Path/Post/scripts/"
```

#### Linux:
```bash
sudo cp "woodwop_post.py" "/usr/share/FreeCAD/Mod/CAM/Path/Post/scripts/"
```

### Метод 2: Установка в пользовательскую директорию

1. Создайте директорию для постпроцессоров:
```bash
mkdir -p "$HOME/Documents/FreeCAD_PostProcessors"
```

2. Скопируйте файл:
```bash
cp "woodwop_post.py" "$HOME/Documents/FreeCAD_PostProcessors/"
```

3. В FreeCAD: **Edit → Preferences → CAM → Job Preferences**
   - Добавьте путь к постпроцессорам в **User Post Processor Path**

4. Перезапустите FreeCAD

## Использование

1. Создайте Job в FreeCAD Path Workbench
2. Добавьте операции обработки (Profile, Pocket, Drilling и т.д.)
3. Выберите постпроцессор **woodwop** в настройках Job
4. Выполните **Path → Post Process**
5. Подтвердите имена файлов в диалоге

## Выходные файлы

Постпроцессор создает три файла:

1. **`{PartName}_{JobName}.mpr`** - Основной файл в формате WoodWOP MPR 4.0
2. **`{PartName}_{JobName}.nc`** - G-code файл для сравнения
3. **`{PartName}_{JobName}_job_report.txt`** - Отчет о свойствах Job

## Именование файлов

Имена файлов автоматически генерируются на основе:
- Имени детали (из `Job.Base` или `Job.Model`)
- Имени Job

Префикс "Model-" автоматически удаляется из имен файлов.

## Параметры

- `--no-comments` - Отключить вывод комментариев
- `--precision=X` - Установить точность координат (по умолчанию 3)
- `--workpiece-length=X` - Длина заготовки в мм (автоопределение по умолчанию)
- `--workpiece-width=Y` - Ширина заготовки в мм (автоопределение по умолчанию)
- `--workpiece-thickness=Z` - Толщина заготовки в мм (автоопределение по умолчанию)

## Формат MPR 4.0

Постпроцессор генерирует файлы в формате WoodWOP MPR 4.0 Alpha, совместимые с:
- WoodWOP 9.0.152 и выше
- Станки HOMAG CNC

## Структура проекта

```
woodwop post/
├── woodwop_post.py          # Основной постпроцессор
├── README.md                # Этот файл
├── CHANGES_REPORT.md        # Отчет об изменениях
├── INSTALL_INSTRUCTIONS.md  # Подробные инструкции по установке
├── USAGE_GUIDE.md           # Руководство по использованию
├── CHANGELOG.md             # История изменений
└── Tools/                   # Инструменты для FreeCAD
    ├── Bit/                 # Библиотека инструментов
    └── Library/             # Библиотека инструментов
```

## Требования

- FreeCAD 1.2.0 или выше
- Python 3.10 или выше
- Path Workbench (встроен в FreeCAD)

## Известные ограничения

- Требуется ручное сравнение MPR и NC файлов для проверки корректности
- Некоторые операции могут требовать дополнительной настройки параметров

## Лицензия

Этот постпроцессор распространяется под той же лицензией, что и FreeCAD (LGPL 2.1+).

## Поддержка

Для вопросов и предложений создавайте Issues в этом репозитории.

## История изменений

См. [CHANGELOG.md](CHANGELOG.md) для подробной истории изменений.

## Авторы

Разработано для интеграции с FreeCAD Path Workbench.

---

**Примечание:** Этот постпроцессор находится в активной разработке. Пожалуйста, проверяйте выходные файлы перед использованием на станке.
